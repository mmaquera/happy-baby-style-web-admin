# Order Fragments
fragment OrderBasic on Order {
  id
  userId
  orderNumber
  status
  subtotal
  taxAmount
  shippingCost
  discountAmount
  totalAmount
  notes
  trackingNumber
  shippedAt
  deliveredAt
  createdAt
  updatedAt
}

fragment OrderFull on Order {
  ...OrderBasic
  shippingAddress
  billingAddress
  user {
    id
    firstName
    lastName
    fullName
  }
  orderItems {
    id
    quantity
    unitPrice
    totalPrice
    productSnapshot
    product {
      id
      name
      sku
      images
    }
    variant {
      id
      size
      color
      sku
    }
  }
}

# Queries
query GetOrders($filter: OrderFilterInput, $pagination: PaginationInput) {
  orders(filter: $filter, pagination: $pagination) {
    orders {
      ...OrderFull
    }
    total
    hasMore
  }
}

query GetOrder($id: ID!) {
  order(id: $id) {
    ...OrderFull
  }
}

query GetOrderByNumber($orderNumber: String!) {
  orderByNumber(orderNumber: $orderNumber) {
    ...OrderFull
  }
}

query GetOrderStats {
  orderStats
}

# Mutations
mutation CreateOrder($input: CreateOrderInput!) {
  createOrder(input: $input) {
    ...OrderFull
  }
}

mutation UpdateOrder($id: ID!, $input: UpdateOrderInput!) {
  updateOrder(id: $id, input: $input) {
    ...OrderFull
  }
}

mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {
  updateOrderStatus(id: $id, status: $status) {
    ...OrderBasic
  }
}
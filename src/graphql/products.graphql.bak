# Product Fragments
fragment ProductBasic on Product {
  id
  name
  price
  currentPrice
  hasDiscount
  discountPercentage
  sku
  images
  isActive
  isInStock
  stockQuantity
  rating
  reviewCount
  createdAt
  updatedAt
}

fragment ProductFull on Product {
  ...ProductBasic
  description
  salePrice
  attributes
  tags
  totalStock
  category {
    id
    name
    slug
  }
  variants {
    id
    size
    color
    sku
    price
    stockQuantity
    isActive
    isInStock
  }
}

# Queries
query GetProducts($filter: ProductFilterInput, $pagination: PaginationInput) {
  products(filter: $filter, pagination: $pagination) {
    products {
      ...ProductFull
    }
    total
    hasMore
  }
}

query GetProduct($id: ID!) {
  product(id: $id) {
    ...ProductFull
  }
}

query GetProductBySku($sku: String!) {
  productBySku(sku: $sku) {
    ...ProductFull
  }
}

# Mutations
mutation CreateProduct($input: CreateProductInput!) {
  createProduct(input: $input) {
    ...ProductFull
  }
}

mutation UpdateProduct($id: ID!, $input: UpdateProductInput!) {
  updateProduct(id: $id, input: $input) {
    ...ProductFull
  }
}

mutation DeleteProduct($id: ID!) {
  deleteProduct(id: $id) {
    success
    message
  }
}

# Image Upload
mutation UploadImage($file: Upload!, $entityType: String!, $entityId: String!) {
  uploadImage(file: $file, entityType: $entityType, entityId: $entityId) {
    success
    url
    filename
    message
  }
}
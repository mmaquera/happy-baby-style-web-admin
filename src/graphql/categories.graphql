# =====================================================
# CATEGORIES GRAPHQL OPERATIONS
# Happy Baby Style Web Admin
# =====================================================

# =====================================================
# QUERIES
# =====================================================

# Get all categories with pagination and filters
query GetCategories($filters: CategoryFilterInput, $pagination: PaginationInput) {
  categories(filters: $filters, pagination: $pagination) {
    success
    message
    code
    timestamp
    data {
      items {
        id
        name
        description
        slug
        image
        isActive
        sortOrder
        createdAt
        updatedAt
        products {
          id
          name
          sku
          isActive
        }
      }
      pagination {
        total
        limit
        offset
        hasMore
        currentPage
        totalPages
      }
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# Get single category by ID
query GetCategory($id: ID!) {
  category(id: $id) {
    success
    message
    code
    timestamp
    data {
      entity {
        id
        name
        description
        slug
        image
        isActive
        sortOrder
        createdAt
        updatedAt
        products {
          id
          name
          description
          price
          salePrice
          sku
          images
          attributes
          isActive
          stockQuantity
          tags
          rating
          reviewCount
          currentPrice
          hasDiscount
          discountPercentage
          totalStock
          isInStock
        }
      }
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# Get category by slug
query GetCategoryBySlug($slug: String!) {
  categoryBySlug(slug: $slug) {
    success
    message
    code
    timestamp
    data {
      entity {
        id
        name
        description
        slug
        image
        isActive
        sortOrder
        createdAt
        updatedAt
        products {
          id
          name
          description
          price
          salePrice
          sku
          images
          attributes
          isActive
          stockQuantity
          tags
          rating
          reviewCount
          currentPrice
          hasDiscount
          discountPercentage
          totalStock
          isInStock
        }
      }
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# =====================================================
# MUTATIONS
# =====================================================

# Create new category
mutation CreateCategory($input: CreateCategoryInput!) {
  createCategory(input: $input) {
    success
    message
    code
    timestamp
    data {
      entity {
        id
        name
        description
        slug
        image
        isActive
        sortOrder
        createdAt
        updatedAt
      }
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# Update existing category
mutation UpdateCategory($id: ID!, $input: UpdateCategoryInput!) {
  updateCategory(id: $id, input: $input) {
    success
    message
    code
    timestamp
    data {
      entity {
        id
        name
        description
        slug
        image
        isActive
        sortOrder
        createdAt
        updatedAt
      }
      id
      updatedAt
      changes
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# Delete category
mutation DeleteCategory($id: ID!) {
  deleteCategory(id: $id) {
    success
    message
    code
    timestamp
    data {
      id
      deletedAt
      softDelete
    }
    metadata {
      requestId
      traceId
      duration
      timestamp
    }
  }
}

# =====================================================
# SUBSCRIPTIONS (Future use)
# =====================================================

# Category changes subscription (for real-time updates)
# subscription OnCategoryChange {
#   categoryChange {
#     operation
#     category {
#       id
#       name
#       description
#       slug
#       image
#       isActive
#       sortOrder
#       createdAt
#       updatedAt
#     }
#   }
# }
